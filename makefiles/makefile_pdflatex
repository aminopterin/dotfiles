# Filename: makefile
# Author: Tzu-Yu Jeng
# Date: Jan. 2017
# Description: to export all `.tex` (LaTeX) files into `.pdf` with `pdflatex`
# Requirement: that `pdflatex` be installed

# To call bash shell for recipe.
SHELL := /usr/bin/env bash

# To specify location of program.
PRG := $${HOME}/Documents/templates_configs_notes/scripts/run_pdflatex.sh

# Extensions resp. of souce and binary files.
EXT_SRC := .tex
EXT_BIN := .pdf

# To set the LaTeX source files in the top directory,
# or in a subfolder, or in a subsubfolder.
# Filenames must not contain whitespace ` `, or Makefile parses them.
SRC = $(wildcard *$(EXT_SRC) */*$(EXT_SRC) */*/*$(EXT_SRC))

# To replace all `.tex` with `.pdf`.
BIN = $(SRC:$(EXT_SRC)=$(EXT_BIN))

# Other affiliated files, to be deleted.
AUX = $(wildcard *.aux */*.aux */*/*.aux)
LOG = $(wildcard *.log */*.log */*/*.log)
GZ = $(wildcard *.gz */*.gz */*/*.gz)

# To delete binary files.
RM := rm -f

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

all : $(BIN)

./%$(EXT_BIN) : ./%$(EXT_SRC)
	@echo Compiling "$@" from "$<" ...
	@$(PRG) "$<"

.PHONY : all clean 

clean :
	$(RM) $(BIN) $(AUX) $(LOG) $(GZ)
